<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaflet to Google Maps with Custom Icons</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        #map {
            height: 100vh;
        }

        .custom-label {
            display: inline-block;
            margin-left: 5px;
            background: white;
            padding: 2px 5px;
            border-radius: 3px;
            border: 1px solid #ccc;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>

    <script>
        const map = L.map('map').setView([13.744746959963875, 100.56417943801763], 17);

        // Corrected OpenStreetMap tile layer URL
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        const buildingLocations = [
            {
                name: "Professor Dr. Saroj Buasri SWU Innovation Building",
                lat: 13.74544898667783, 
                lng: 100.56354275263543,
                image: 'https://lh3.googleusercontent.com/p/AF1QipM-gpWeZ8Gg3bOI38BQLFmsYeTbZFus76rRsOg=s1360-w1360-h1020'
            },
            {
                name: "Faculty of Social Sciences Building",
                lat: 13.744724923197845,
                lng: 100.56383069521816,
                image: 'https://photos.swu.ac.th/storage/cache/photo/photo-4268-large.jpeg'
            }
        ];

        buildingLocations.forEach(location => {
            const labelIcon = L.divIcon({
                html: `
        <div style="display: flex; align-items: center; gap: 8px;">
            <img decoding="async" src="${location.image}" alt="${location.name}" 
                style="width: 100px; height: 100px; object-fit: cover; clip-path: circle(50% at 50% 50%); border: 2px solid #ccc;">
            <span class="custom-label" style="font-size: 13px; font-weight: bold;">${location.name}</span>
        </div>
    `,
                className: ''
            });

            const popupContent = `
                <div style="text-align: center;">
                    <img decoding="async" src="${location.image}" style="width: 100px; height: 100px; object-fit: cover; border-radius: 10px;" alt="${location.name}">
                    <h5>${location.name}</h5>
                </div>
            `;

            L.marker([location.lat, location.lng], { icon: labelIcon })
                .bindPopup(popupContent)
                .addTo(map);
        });

        const otherLocations = [
            { name: "SWC Clinic and Students Health Services", lat: 13.7446472, lng: 100.5636666, type: "hospital" },
            { name: "Eat Me Up Steak", lat: 13.744549, lng: 100.563591, type: "restaurant" },
            { name: "บ้านก้ามปู อโศก (Baan Kampu Asoke)", lat: 13.745825746048492, lng: 100.5629857865718, type: "restaurant" },
            { name: "Le Dalat", lat: 13.742919, lng: 100.563475, type: "restaurant" },
            { name: "canteen1", lat: 13.743868, lng: 100.566080, type: "restaurant" },
            { name: "canteen2", lat: 13.744343, lng: 100.566219, type: "restaurant" },
            { name: "ABP CATE", lat: 13.745971, lng: 100.562866, type: "cafe" },
            { name: "BEARHOUSE (แบร์เฮาส์) บ้านก้ามปู", lat: 13.745687, lng: 100.562920, type: "cafe" },
            { name: "Ratchaphruek Coffee", lat: 13.744060870200844, lng: 100.56440738616195, type: "cafe" },
            { name: "ThinkLab Creative Space and Cafe", lat: 13.747991, lng: 100.567657, type: "cafe" },
            { name: "WOW", lat: 13.743452, lng: 100.562877, type: "cafe" },
            { name: "A Cup Asoke Coffee and Bakery", lat: 13.744416178254893, lng: 100.5625237040893, type: "cafe" },
            { name: "วัวล้วนๆ ไม่มีควายผสม", lat: 13.745750, lng: 100.563403, type: "cafe" },
            { name: "Anytime - Brunch, Focaccia, Coffee", lat: 13.74540122679035, lng: 100.56243955779038, type: "cafe" },
            { name: "Honey Loves to Cook, Pick up Store", lat: 13.743074967048901, lng: 100.56495979272111, type: "cafe" },
            { name: "But First, FIKA", lat: 13.744510850099406, lng: 100.56702816670567, type: "cafe" },
            { name: "starbucks", lat: 13.743405, lng: 100.562394, type: "starbucks" },
            { name: "starbucks", lat: 13.7446279, lng: 100.5638192, type: "starbucks" },
            { name: "starbucks", lat: 13.745879430061326, lng: 100.56285215089125, type: "starbucks" },
            { name: "Café Amazon​", lat: 13.7457127, lng: 100.5628076, type: "Amazon" },
            { name: "Café Amazon สาขา 31 Learning Center มศว. อาคารเรียนรวม ประตู 3 (SD3774)", lat: 13.746166993062872, lng: 100.56584122858938, type: "Amazon" },
            { name: "Café Amazon​", lat: 13.743483760536327, lng: 100.56373880199587, type: "Amazon" },
            { name: "Prayer room, Student Activities Building, 1st floor", lat: 13.745090, lng: 100.565750, type: "preyer" },
            { name: "The Church of Jesus Christ of Latter-day Saints Asok", lat: 13.746242418563487, lng: 100.56415051194004, type: "church" },
            { name: "7-11", lat: 13.745294, lng: 100.562772, type: "seven" },
            { name: "7-11", lat: 13.746044, lng: 100.564814, type: "seven" },
            { name: "7-11", lat: 13.748504, lng: 100.566160, type: "seven" },
            { name: "7-11", lat: 13.743783, lng: 100.566023, type: "seven" },
            { name: "7-11", lat: 13.742727, lng: 100.564932, type: "seven" },
            { name: "7-11", lat: 13.744556, lng: 100.562274, type: "seven" },
            { name: "The Lancaster Bangkok", lat: 13.748902, lng: 100.567254, type: "hotel" },
            { name: "Holiday Inn Bangkok Sukhumvit", lat: 13.732972, lng: 100.565471, type: "holidayinn" },
            { name: "Bus Stop (ตรงข้าม มศว (ฝั่งอโศก))", lat: 13.745690, lng: 100.562579, type: "bus" },
            { name: "Bus Stop (มิดทาวน์อโศก)", lat: 13.743639, lng: 100.562113, type: "bus" },
            { name: "Bus Stop (มศว (ฝั่งอโศก))", lat: 13.744469157661152, lng: 100.56248761782874, type: "bus" },
            { name: "MRT (Petchburi station)", lat: 13.748710, lng: 100.563135, type: "mrt" },
            { name: "BTS (Asok)", lat: 13.736993, lng: 100.560401, type: "bts" },
            { name: "Airport Rail Link (Makkasan)", lat: 13.750888, lng: 100.561139, type: "airlink" },
            { name: "Port (Prasarnmit (SWU))", lat: 13.747378, lng: 100.565742, type: "port" },
            { name: "Port (Asok Pier)", lat: 13.747855, lng: 100.562941, type: "port" },
            { name: "motorcycle taxi", lat: 13.743394, lng: 100.563786, type: "win" },
        ];

        const defaultIcons = {
            hospital: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/4006/4006511.png', iconSize: [28, 28] }),
            restaurant: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/3170/3170733.png', iconSize: [28, 28] }),
            cafe: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/9849/9849749.png', iconSize: [28, 28] }),
            preyer: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/4264/4264369.png', iconSize: [28, 28] }),
            church: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/3450/3450820.png', iconSize: [28, 28] }),
            seven: L.icon({ iconUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/4/40/7-eleven_logo.svg/1200px-7-eleven_logo.svg.png', iconSize: [25, 25] }),
            hotel: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/5193/5193714.png', iconSize: [35, 35] }),
            starbucks: L.icon({ iconUrl: 'https://static.vecteezy.com/system/resources/previews/022/636/386/non_2x/starbucks-logo-starbucks-icon-transparent-free-png.png', iconSize: [40, 40] }),
            Amazon: L.icon({ iconUrl: 'https://seeklogo.com/images/C/cafe-amazon-logo-B2ABB86EEF-seeklogo.com.png', iconSize: [30, 30] }),
            bus: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/6395/6395324.png', iconSize: [35, 35] }),
            mrt: L.icon({ iconUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/MRT_%28Bangkok%29_logo.svg/2351px-MRT_%28Bangkok%29_logo.svg.png', iconSize: [25, 25] }),
            bts: L.icon({ iconUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/ee/BTS-Logo.svg/1709px-BTS-Logo.svg.png', iconSize: [30, 30] }),
            airlink: L.icon({ iconUrl: 'https://iconape.com/wp-content/files/dt/354955/svg/354955.svg', iconSize: [30, 30] }),
            port: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/6395/6395383.png', iconSize: [35, 35] }),
            win: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/1023/1023457.png', iconSize: [28, 28] }),
            holidayinn: L.icon({ iconUrl: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR_4RWqajm5JME87-xlKz6C_Wn4GGPa9rAGag&s', iconSize: [38, 38] }),
        };

        otherLocations.forEach(location => {
            const icon = defaultIcons[location.type];
            L.marker([location.lat, location.lng], { icon: icon })
                .bindPopup(`<h5>${location.name}</h5>`)
                .addTo(map);
        });
    </script>
</body>
</html>